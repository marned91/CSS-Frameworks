import{c as u,s as i}from"./constants-DQWCF818.js";async function d({email:e,password:o}){const n=JSON.stringify({email:e,password:o});try{const t=await fetch(u,{headers:{"Content-Type":"application/json"},method:"POST",body:n});if(t.ok){const{data:s}=await t.json(),{accessToken:r,...a}=s;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)),s}throw new Error("Could not log in with this account")}catch(t){throw console.error("Login error:",t),t}}async function g(e){e.preventDefault();const o=e.target,n=o.querySelector("fieldset"),t=o.querySelector("button"),s=t.textContent,r=new FormData(o),a=r.get("email"),l=r.get("password");n.disabled=!0,t.textContent="Logging In...";try{const c=await d({email:a,password:l});i("Login successful!","success"),o.reset(),setTimeout(()=>window.location.pathname="/",2e3)}catch(c){i(`Login failed: ${c.message}`,"error")}finally{n.disabled=!1,t.textContent=s}}const f=document.forms.login;f.addEventListener("submit",g);
